
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://PrefectHQ.github.io/prefect-dbt/cloud/jobs/">
      
      
        <link rel="prev" href="../credentials/">
      
      
        <link rel="next" href="../runs/">
      
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.8">
    
    
      
        <title>Jobs - prefect-dbt</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-8CSMBCQDKN"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-8CSMBCQDKN",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-8CSMBCQDKN",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prefect_dbt.cloud.jobs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="prefect-dbt" class="md-header__button md-logo" aria-label="prefect-dbt" data-md-component="logo">
      
  <img src="../../img/prefect-logo-mark-solid-white-500.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            prefect-dbt
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Jobs
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_3" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_3">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/prefecthq/prefect-dbt" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="prefect-dbt" class="md-nav__button md-logo" aria-label="prefect-dbt" data-md-component="logo">
      
  <img src="../../img/prefect-logo-mark-solid-white-500.png" alt="logo">

    </a>
    prefect-dbt
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/prefecthq/prefect-dbt" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../blocks_catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blocks Catalog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../examples_catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples Catalog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" checked>
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cloud
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Cloud
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../credentials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credentials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Jobs
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Jobs
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJob" class="md-nav__link">
    DbtCloudJob
  </a>
  
    <nav class="md-nav" aria-label="DbtCloudJob">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJob-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJob.get_job" class="md-nav__link">
    get_job()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJob.trigger" class="md-nav__link">
    trigger()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun" class="md-nav__link">
    DbtCloudJobRun
  </a>
  
    <nav class="md-nav" aria-label="DbtCloudJobRun">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun.fetch_result" class="md-nav__link">
    fetch_result()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun.get_run" class="md-nav__link">
    get_run()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun.get_run_artifacts" class="md-nav__link">
    get_run_artifacts()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun.get_status_code" class="md-nav__link">
    get_status_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun.retry_failed_steps" class="md-nav__link">
    retry_failed_steps()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun.wait_for_completion" class="md-nav__link">
    wait_for_completion()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.get_dbt_cloud_job_info" class="md-nav__link">
    get_dbt_cloud_job_info()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.get_run_id" class="md-nav__link">
    get_run_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.retry_dbt_cloud_job_run_subset_and_wait_for_completion" class="md-nav__link">
    retry_dbt_cloud_job_run_subset_and_wait_for_completion()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.run_dbt_cloud_job" class="md-nav__link">
    run_dbt_cloud_job()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.trigger_dbt_cloud_job_run" class="md-nav__link">
    trigger_dbt_cloud_job_run()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.trigger_dbt_cloud_job_run_and_wait_for_completion" class="md-nav__link">
    trigger_dbt_cloud_job_run_and_wait_for_completion()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../runs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Runs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../clients/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clients
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CLI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            CLI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/credentials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credentials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3" >
        
          
          <label class="md-nav__link" for="__nav_4_2_3" id="__nav_4_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_3">
            <span class="md-nav__icon md-icon"></span>
            Configs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/configs/base/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Base
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/configs/bigquery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BigQuery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/configs/postgres/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Postgres
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/configs/snowflake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Snowflake
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJob" class="md-nav__link">
    DbtCloudJob
  </a>
  
    <nav class="md-nav" aria-label="DbtCloudJob">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJob-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJob.get_job" class="md-nav__link">
    get_job()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJob.trigger" class="md-nav__link">
    trigger()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun" class="md-nav__link">
    DbtCloudJobRun
  </a>
  
    <nav class="md-nav" aria-label="DbtCloudJobRun">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun.fetch_result" class="md-nav__link">
    fetch_result()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun.get_run" class="md-nav__link">
    get_run()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun.get_run_artifacts" class="md-nav__link">
    get_run_artifacts()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun.get_status_code" class="md-nav__link">
    get_status_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun.retry_failed_steps" class="md-nav__link">
    retry_failed_steps()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.DbtCloudJobRun.wait_for_completion" class="md-nav__link">
    wait_for_completion()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.get_dbt_cloud_job_info" class="md-nav__link">
    get_dbt_cloud_job_info()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.get_run_id" class="md-nav__link">
    get_run_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.retry_dbt_cloud_job_run_subset_and_wait_for_completion" class="md-nav__link">
    retry_dbt_cloud_job_run_subset_and_wait_for_completion()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.run_dbt_cloud_job" class="md-nav__link">
    run_dbt_cloud_job()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.trigger_dbt_cloud_job_run" class="md-nav__link">
    trigger_dbt_cloud_job_run()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_dbt.cloud.jobs.trigger_dbt_cloud_job_run_and_wait_for_completion" class="md-nav__link">
    trigger_dbt_cloud_job_run_and_wait_for_completion()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<div class="doc doc-object doc-module">




<h1 id="prefect_dbt.cloud.jobs" class="doc doc-heading">
          <code>prefect_dbt.cloud.jobs</code>


</h1>

  <div class="doc doc-contents first">
  
      <p>Module containing tasks and flows for interacting with dbt Cloud jobs</p>

  

  <div class="doc doc-children">






<h2 id="prefect_dbt.cloud.jobs-classes">Classes</h2>

<div class="doc doc-object doc-class">




<h3 id="prefect_dbt.cloud.jobs.DbtCloudJob" class="doc doc-heading">
          <code>DbtCloudJob</code>


</h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="prefect.blocks.abstract.JobBlock">JobBlock</span></code></p>

  
      <p>Block that holds the information and methods to interact with a dbt Cloud job.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dbt_cloud_credentials</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_dbt.cloud.credentials.DbtCloudCredentials" href="../credentials/#prefect_dbt.cloud.credentials.DbtCloudCredentials">DbtCloudCredentials</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The credentials to use to authenticate with dbt Cloud.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>job_id</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The id of the dbt Cloud job.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>timeout_seconds</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The number of seconds to wait for the job to complete.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>interval_seconds</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The number of seconds to wait between polling for job completion.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>trigger_job_run_options</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_dbt.cloud.models.TriggerJobRunOptions" href="../models/#prefect_dbt.cloud.models.TriggerJobRunOptions">TriggerJobRunOptions</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The options to use when triggering a job run.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <p>Load a configured dbt Cloud job block.
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect_dbt.cloud</span> <span class="kn">import</span> <span class="n">DbtCloudJob</span>

<span class="n">dbt_cloud_job</span> <span class="o">=</span> <span class="n">DbtCloudJob</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;BLOCK_NAME&quot;</span><span class="p">)</span>
</code></pre></div></p>
<p>Triggers a dbt Cloud job, waits for completion, and fetches the results.
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud</span> <span class="kn">import</span> <span class="n">DbtCloudCredentials</span><span class="p">,</span> <span class="n">DbtCloudJob</span>

<span class="nd">@flow</span>
<span class="k">def</span> <span class="nf">dbt_cloud_job_flow</span><span class="p">():</span>
    <span class="n">dbt_cloud_credentials</span> <span class="o">=</span> <span class="n">DbtCloudCredentials</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;dbt-token&quot;</span><span class="p">)</span>
    <span class="n">dbt_cloud_job</span> <span class="o">=</span> <span class="n">DbtCloudJob</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">dbt_cloud_credentials</span><span class="p">,</span>
        <span class="n">job_id</span><span class="o">=</span><span class="mi">154217</span>
    <span class="p">)</span>
    <span class="n">dbt_cloud_job_run</span> <span class="o">=</span> <span class="n">dbt_cloud_job</span><span class="o">.</span><span class="n">trigger</span><span class="p">()</span>
    <span class="n">dbt_cloud_job_run</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>
    <span class="n">dbt_cloud_job_run</span><span class="o">.</span><span class="n">fetch_result</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">dbt_cloud_job_run</span>

<span class="n">dbt_cloud_job_flow</span><span class="p">()</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DbtCloudJob</span><span class="p">(</span><span class="n">JobBlock</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Block that holds the information and methods to interact with a dbt Cloud job.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        dbt_cloud_credentials: The credentials to use to authenticate with dbt Cloud.</span>
<span class="sd">        job_id: The id of the dbt Cloud job.</span>
<span class="sd">        timeout_seconds: The number of seconds to wait for the job to complete.</span>
<span class="sd">        interval_seconds:</span>
<span class="sd">            The number of seconds to wait between polling for job completion.</span>
<span class="sd">        trigger_job_run_options: The options to use when triggering a job run.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Load a configured dbt Cloud job block.</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect_dbt.cloud import DbtCloudJob</span>

<span class="sd">        dbt_cloud_job = DbtCloudJob.load(&quot;BLOCK_NAME&quot;)</span>
<span class="sd">        ```</span>

<span class="sd">        Triggers a dbt Cloud job, waits for completion, and fetches the results.</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import flow</span>
<span class="sd">        from prefect_dbt.cloud import DbtCloudCredentials, DbtCloudJob</span>

<span class="sd">        @flow</span>
<span class="sd">        def dbt_cloud_job_flow():</span>
<span class="sd">            dbt_cloud_credentials = DbtCloudCredentials.load(&quot;dbt-token&quot;)</span>
<span class="sd">            dbt_cloud_job = DbtCloudJob.load(</span>
<span class="sd">                dbt_cloud_credentials=dbt_cloud_credentials,</span>
<span class="sd">                job_id=154217</span>
<span class="sd">            )</span>
<span class="sd">            dbt_cloud_job_run = dbt_cloud_job.trigger()</span>
<span class="sd">            dbt_cloud_job_run.wait_for_completion()</span>
<span class="sd">            dbt_cloud_job_run.fetch_result()</span>
<span class="sd">            return dbt_cloud_job_run</span>

<span class="sd">        dbt_cloud_job_flow()</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_block_type_name</span> <span class="o">=</span> <span class="s2">&quot;dbt Cloud Job&quot;</span>
    <span class="n">_logo_url</span> <span class="o">=</span> <span class="s2">&quot;https://images.ctfassets.net/gm98wzqotmnx/5zE9lxfzBHjw3tnEup4wWL/9a001902ed43a84c6c96d23b24622e19/dbt-bit_tm.png?h=250&quot;</span>  <span class="c1"># noqa</span>
    <span class="n">_documentation_url</span> <span class="o">=</span> <span class="s2">&quot;https://prefecthq.github.io/prefect-dbt/cloud/jobs/#prefect_dbt.cloud.jobs.DbtCloudJob&quot;</span>  <span class="c1"># noqa</span>

    <span class="n">dbt_cloud_credentials</span><span class="p">:</span> <span class="n">DbtCloudCredentials</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The dbt Cloud credentials to use to authenticate with dbt Cloud.&quot;</span><span class="p">,</span>
    <span class="p">)</span>  <span class="c1"># noqa: E501</span>
    <span class="n">job_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The id of the dbt Cloud job.&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Job ID&quot;</span>
    <span class="p">)</span>
    <span class="n">timeout_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of seconds to wait for the job to complete.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">interval_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of seconds to wait between polling for job completion.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">trigger_job_run_options</span><span class="p">:</span> <span class="n">TriggerJobRunOptions</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">TriggerJobRunOptions</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The options to use when triggering a job run.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@sync_compatible</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve information about a dbt Cloud job.</span>

<span class="sd">        Args:</span>
<span class="sd">            order_by: The field to order the results by.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The job data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">get_administrative_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_job</span><span class="p">(</span>
                    <span class="n">job_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                    <span class="n">order_by</span><span class="o">=</span><span class="n">order_by</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DbtCloudGetJobFailed</span><span class="p">(</span><span class="n">extract_user_message</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>

    <span class="nd">@sync_compatible</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">trigger</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">trigger_job_run_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TriggerJobRunOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DbtCloudJobRun</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Triggers a dbt Cloud job.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A representation of the dbt Cloud job run.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">trigger_job_run_options</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">trigger_job_run_options</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_job_run_options</span>
            <span class="p">)</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">get_administrative_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">trigger_job_run</span><span class="p">(</span>
                    <span class="n">job_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">trigger_job_run_options</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DbtCloudJobRunTriggerFailed</span><span class="p">(</span><span class="n">extract_user_message</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>

        <span class="n">run_data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
        <span class="n">run_id</span> <span class="o">=</span> <span class="n">run_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="n">run</span> <span class="o">=</span> <span class="n">DbtCloudJobRun</span><span class="p">(</span>
            <span class="n">dbt_cloud_job</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;dbt Cloud job </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="si">}</span><span class="s2"> run </span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2"> successfully triggered. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;You can view the status of this run at &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">domain</span><span class="si">}</span><span class="s2">/#/accounts/&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">account_id</span><span class="si">}</span><span class="s2">/projects/&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">run_data</span><span class="p">[</span><span class="s1">&#39;project_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/runs/</span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">/&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">run</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<h4 id="prefect_dbt.cloud.jobs.DbtCloudJob-functions">Functions</h4>


<div class="doc doc-object doc-function">




<h5 id="prefect_dbt.cloud.jobs.DbtCloudJob.get_job" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_job</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Retrieve information about a dbt Cloud job.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>order_by</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The field to order the results by.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The job data.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sync_compatible</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve information about a dbt Cloud job.</span>

<span class="sd">    Args:</span>
<span class="sd">        order_by: The field to order the results by.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The job data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">get_administrative_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_job</span><span class="p">(</span>
                <span class="n">job_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                <span class="n">order_by</span><span class="o">=</span><span class="n">order_by</span><span class="p">,</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DbtCloudGetJobFailed</span><span class="p">(</span><span class="n">extract_user_message</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="prefect_dbt.cloud.jobs.DbtCloudJob.trigger" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">trigger</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Triggers a dbt Cloud job.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_dbt.cloud.jobs.DbtCloudJobRun" href="#prefect_dbt.cloud.jobs.DbtCloudJobRun">DbtCloudJobRun</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A representation of the dbt Cloud job run.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sync_compatible</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">trigger</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">trigger_job_run_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TriggerJobRunOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DbtCloudJobRun</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Triggers a dbt Cloud job.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A representation of the dbt Cloud job run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">trigger_job_run_options</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">trigger_job_run_options</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_job_run_options</span>
        <span class="p">)</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">get_administrative_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">trigger_job_run</span><span class="p">(</span>
                <span class="n">job_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">trigger_job_run_options</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DbtCloudJobRunTriggerFailed</span><span class="p">(</span><span class="n">extract_user_message</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>

    <span class="n">run_data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
    <span class="n">run_id</span> <span class="o">=</span> <span class="n">run_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
    <span class="n">run</span> <span class="o">=</span> <span class="n">DbtCloudJobRun</span><span class="p">(</span>
        <span class="n">dbt_cloud_job</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;dbt Cloud job </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="si">}</span><span class="s2"> run </span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2"> successfully triggered. &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;You can view the status of this run at &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">domain</span><span class="si">}</span><span class="s2">/#/accounts/&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">account_id</span><span class="si">}</span><span class="s2">/projects/&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">run_data</span><span class="p">[</span><span class="s1">&#39;project_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/runs/</span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">/&quot;</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">run</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h3 id="prefect_dbt.cloud.jobs.DbtCloudJobRun" class="doc doc-heading">
          <code>DbtCloudJobRun</code>


</h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="prefect.blocks.abstract.JobRun">JobRun</span></code></p>

  
      <p>Class that holds the information and methods to interact
with the resulting run of a dbt Cloud job.</p>

            <details class="quote">
              <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DbtCloudJobRun</span><span class="p">(</span><span class="n">JobRun</span><span class="p">):</span>  <span class="c1"># NOT A BLOCK</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class that holds the information and methods to interact</span>
<span class="sd">    with the resulting run of a dbt Cloud job.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dbt_cloud_job</span><span class="p">:</span> <span class="s2">&quot;DbtCloudJob&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_id</span> <span class="o">=</span> <span class="n">run_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_job</span> <span class="o">=</span> <span class="n">dbt_cloud_job</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_credentials</span> <span class="o">=</span> <span class="n">dbt_cloud_job</span><span class="o">.</span><span class="n">dbt_cloud_credentials</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_log_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;dbt Cloud job </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_job</span><span class="o">.</span><span class="n">job_id</span><span class="si">}</span><span class="s2"> run </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">run_id</span><span class="si">}</span><span class="s2">.&quot;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_wait_until_state</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">in_final_state_fn</span><span class="p">:</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">Callable</span><span class="p">],</span>
        <span class="n">get_state_fn</span><span class="p">:</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">Callable</span><span class="p">],</span>
        <span class="n">log_state_fn</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">60</span><span class="p">,</span>
        <span class="n">interval_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wait until the job run reaches a specific state.</span>

<span class="sd">        Args:</span>
<span class="sd">            in_final_state_fn: An async function that accepts a run state</span>
<span class="sd">                and returns a boolean indicating whether the job run is</span>
<span class="sd">                in a final state.</span>
<span class="sd">            get_state_fn: An async function that returns</span>
<span class="sd">                the current state of the job run.</span>
<span class="sd">            log_state_fn: A callable that accepts a run</span>
<span class="sd">                state and makes it human readable.</span>
<span class="sd">            timeout_seconds: The maximum amount of time, in seconds, to wait</span>
<span class="sd">                for the job run to reach the final state.</span>
<span class="sd">            interval_seconds: The number of seconds to wait between checks of</span>
<span class="sd">                the job run&#39;s state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">last_state</span> <span class="o">=</span> <span class="n">run_state</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">in_final_state_fn</span><span class="p">(</span><span class="n">run_state</span><span class="p">):</span>
            <span class="n">run_state</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_state_fn</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">run_state</span> <span class="o">!=</span> <span class="n">last_state</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> has new state: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="p">,</span>
                        <span class="n">log_state_fn</span><span class="p">(</span><span class="n">run_state</span><span class="p">),</span>
                    <span class="p">)</span>
                <span class="n">last_state</span> <span class="o">=</span> <span class="n">run_state</span>

            <span class="n">elapsed_time_seconds</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
            <span class="k">if</span> <span class="n">elapsed_time_seconds</span> <span class="o">&gt;</span> <span class="n">timeout_seconds</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DbtCloudJobRunTimedOut</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Max wait time of </span><span class="si">{</span><span class="n">timeout_seconds</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="s2">&quot;seconds exceeded while waiting&quot;</span>
                <span class="p">)</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval_seconds</span><span class="p">)</span>

    <span class="nd">@sync_compatible</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Makes a request to the dbt Cloud API to get the run data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The run data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dbt_cloud_credentials</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_credentials</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">get_administrative_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">run_id</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DbtCloudGetRunFailed</span><span class="p">(</span><span class="n">extract_user_message</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>
        <span class="n">run_data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">run_data</span>

    <span class="nd">@sync_compatible</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_status_code</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Makes a request to the dbt Cloud API to get the run status.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The run status code.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">run_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run</span><span class="p">()</span>
        <span class="n">run_status_code</span> <span class="o">=</span> <span class="n">run_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">run_status_code</span>

    <span class="nd">@sync_compatible</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_for_completion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Waits for the job run to reach a terminal state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_until_state</span><span class="p">(</span>
            <span class="n">in_final_state_fn</span><span class="o">=</span><span class="n">DbtCloudJobRunStatus</span><span class="o">.</span><span class="n">is_terminal_status_code</span><span class="p">,</span>
            <span class="n">get_state_fn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_status_code</span><span class="p">,</span>
            <span class="n">log_state_fn</span><span class="o">=</span><span class="n">DbtCloudJobRunStatus</span><span class="p">,</span>
            <span class="n">timeout_seconds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_job</span><span class="o">.</span><span class="n">timeout_seconds</span><span class="p">,</span>
            <span class="n">interval_seconds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_job</span><span class="o">.</span><span class="n">interval_seconds</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@sync_compatible</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the results from the job run. Since the results</span>
<span class="sd">        may not be ready, use wait_for_completion before calling this method.</span>

<span class="sd">        Args:</span>
<span class="sd">            step: The index of the step in the run to query for artifacts. The</span>
<span class="sd">                first step in the run has the index 1. If the step parameter is</span>
<span class="sd">                omitted, then this method will return the artifacts compiled</span>
<span class="sd">                for the last step in the run.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">run_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run</span><span class="p">()</span>
        <span class="n">run_status</span> <span class="o">=</span> <span class="n">DbtCloudJobRunStatus</span><span class="p">(</span><span class="n">run_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">run_status</span> <span class="o">==</span> <span class="n">DbtCloudJobRunStatus</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_credentials</span><span class="o">.</span><span class="n">get_administrative_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>  <span class="c1"># noqa</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">list_run_artifacts</span><span class="p">(</span>
                        <span class="n">run_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="n">step</span>
                    <span class="p">)</span>
                <span class="n">run_data</span><span class="p">[</span><span class="s2">&quot;artifact_paths&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> completed successfully!&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DbtCloudListRunArtifactsFailed</span><span class="p">(</span><span class="n">extract_user_message</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>
            <span class="k">return</span> <span class="n">run_data</span>
        <span class="k">elif</span> <span class="n">run_status</span> <span class="o">==</span> <span class="n">DbtCloudJobRunStatus</span><span class="o">.</span><span class="n">CANCELLED</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DbtCloudJobRunCancelled</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="si">}</span><span class="s2"> was cancelled.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">run_status</span> <span class="o">==</span> <span class="n">DbtCloudJobRunStatus</span><span class="o">.</span><span class="n">FAILED</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DbtCloudJobRunFailed</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="si">}</span><span class="s2"> has failed.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DbtCloudJobRunIncomplete</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="si">}</span><span class="s2"> is still running; &quot;</span>
                <span class="s2">&quot;use wait_for_completion() to wait until results are ready.&quot;</span>
            <span class="p">)</span>

    <span class="nd">@sync_compatible</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_run_artifacts</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;manifest.json&quot;</span><span class="p">,</span> <span class="s2">&quot;catalog.json&quot;</span><span class="p">,</span> <span class="s2">&quot;run_results.json&quot;</span><span class="p">],</span>
        <span class="n">step</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get an artifact generated for a completed run.</span>

<span class="sd">        Args:</span>
<span class="sd">            path: The relative path to the run artifact.</span>
<span class="sd">            step: The index of the step in the run to query for artifacts. The</span>
<span class="sd">                first step in the run has the index 1. If the step parameter is</span>
<span class="sd">                omitted, then this method will return the artifacts compiled</span>
<span class="sd">                for the last step in the run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The contents of the requested manifest. Returns a `Dict` if the</span>
<span class="sd">                requested artifact is a JSON file and a `str` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dbt_cloud_credentials</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_credentials</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">get_administrative_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_run_artifact</span><span class="p">(</span>
                    <span class="n">run_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="n">step</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DbtCloudGetRunArtifactFailed</span><span class="p">(</span><span class="n">extract_user_message</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.json&quot;</span><span class="p">):</span>
            <span class="n">artifact_contents</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">artifact_contents</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>
        <span class="k">return</span> <span class="n">artifact_contents</span>

    <span class="k">def</span> <span class="nf">_select_unsuccessful_commands</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">run_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">command_components</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">exe_command</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Select nodes that were not successful and rebuild a command.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># note &quot;fail&quot; here instead of &quot;cancelled&quot; because</span>
        <span class="c1"># nodes do not have a cancelled state</span>
        <span class="n">run_nodes</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">run_result</span><span class="p">[</span><span class="s2">&quot;unique_id&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">run_result</span> <span class="ow">in</span> <span class="n">run_results</span>
            <span class="k">if</span> <span class="n">run_result</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="s2">&quot;skipped&quot;</span><span class="p">,</span> <span class="s2">&quot;fail&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">select_arg</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s2">&quot;-s&quot;</span> <span class="ow">in</span> <span class="n">command_components</span><span class="p">:</span>
            <span class="n">select_arg</span> <span class="o">=</span> <span class="s2">&quot;-s&quot;</span>
        <span class="k">elif</span> <span class="s2">&quot;--select&quot;</span> <span class="ow">in</span> <span class="n">command_components</span><span class="p">:</span>
            <span class="n">select_arg</span> <span class="o">=</span> <span class="s2">&quot;--select&quot;</span>

        <span class="c1"># prevent duplicate --select/-s statements</span>
        <span class="k">if</span> <span class="n">select_arg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># dbt --fail-fast run, -s, bad_mod --vars &#39;{&quot;env&quot;: &quot;prod&quot;}&#39; to:</span>
            <span class="c1"># dbt --fail-fast run -s other_mod bad_mod --vars &#39;{&quot;env&quot;: &quot;prod&quot;}&#39;</span>
            <span class="n">command_start</span><span class="p">,</span> <span class="n">select_arg</span><span class="p">,</span> <span class="n">command_end</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="n">select_arg</span><span class="p">)</span>
            <span class="n">modified_command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">command_start</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">select_arg</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">run_nodes</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">command_end</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># noqa</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># dbt --fail-fast, build, --vars &#39;{&quot;env&quot;: &quot;prod&quot;}&#39; to:</span>
            <span class="c1"># dbt --fail-fast build --select bad_model --vars &#39;{&quot;env&quot;: &quot;prod&quot;}&#39;</span>
            <span class="n">dbt_global_args</span><span class="p">,</span> <span class="n">exe_command</span><span class="p">,</span> <span class="n">exe_args</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="n">exe_command</span><span class="p">)</span>
            <span class="n">modified_command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dbt_global_args</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">exe_command</span><span class="si">}</span><span class="s2"> -s </span><span class="si">{</span><span class="n">run_nodes</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">exe_args</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">modified_command</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_build_trigger_job_run_options</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">job</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">run</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TriggerJobRunOptions</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compiles a list of steps (commands) to retry, then either build trigger job</span>
<span class="sd">        run options from scratch if it does not exist, else overrides the existing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">generate_docs</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;generate_docs&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">generate_sources</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;generate_sources&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="n">steps_override</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">run_step</span> <span class="ow">in</span> <span class="n">run</span><span class="p">[</span><span class="s2">&quot;run_steps&quot;</span><span class="p">]:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">run_step</span><span class="p">[</span><span class="s2">&quot;status_humanized&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="c1"># Skipping cloning, profile setup, and dbt deps - always the first three</span>
            <span class="c1"># steps in any run, and note, index starts at 1 instead of 0</span>
            <span class="k">if</span> <span class="n">run_step</span><span class="p">[</span><span class="s2">&quot;index&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;success&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1"># get dbt build from &quot;Invoke dbt with `dbt build`&quot;</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">run_step</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot;`&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot;`&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

            <span class="c1"># These steps will be re-run regardless if</span>
            <span class="c1"># generate_docs or generate_sources are enabled for a given job</span>
            <span class="c1"># so if we don&#39;t skip, it&#39;ll run twice</span>
            <span class="n">freshness_in_command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;dbt source snapshot-freshness&quot;</span> <span class="ow">in</span> <span class="n">command</span>
                <span class="ow">or</span> <span class="s2">&quot;dbt source freshness&quot;</span> <span class="ow">in</span> <span class="n">command</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;dbt docs generate&quot;</span> <span class="ow">in</span> <span class="n">command</span> <span class="ow">and</span> <span class="n">generate_docs</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">elif</span> <span class="n">freshness_in_command</span> <span class="ow">and</span> <span class="n">generate_sources</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># find an executable command like `build` or `run`</span>
            <span class="c1"># search in a list so that there aren&#39;t false positives, like</span>
            <span class="c1"># `&quot;run&quot; in &quot;dbt run-operation&quot;`, which is True; we actually want</span>
            <span class="c1"># `&quot;run&quot; in [&quot;dbt&quot;, &quot;run-operation&quot;]` which is False</span>
            <span class="n">command_components</span> <span class="o">=</span> <span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">exe_command</span> <span class="ow">in</span> <span class="n">EXE_COMMANDS</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">exe_command</span> <span class="ow">in</span> <span class="n">command_components</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">exe_command</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

            <span class="n">is_exe_command</span> <span class="o">=</span> <span class="n">exe_command</span> <span class="ow">in</span> <span class="n">EXE_COMMANDS</span>
            <span class="n">is_not_success</span> <span class="o">=</span> <span class="n">status</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="s2">&quot;skipped&quot;</span><span class="p">,</span> <span class="s2">&quot;cancelled&quot;</span><span class="p">)</span>
            <span class="n">is_skipped</span> <span class="o">=</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;skipped&quot;</span>
            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">is_exe_command</span> <span class="ow">and</span> <span class="n">is_not_success</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="n">is_exe_command</span> <span class="ow">and</span> <span class="n">is_skipped</span>
            <span class="p">):</span>
                <span class="c1"># if no matches like `run-operation`, we will be rerunning entirely</span>
                <span class="c1"># or if it&#39;s one of the expected commands and is skipped</span>
                <span class="n">steps_override</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># errors and failures are when we need to inspect to figure</span>
                <span class="c1"># out the point of failure</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">run_artifact</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run_artifacts</span><span class="p">(</span>
                        <span class="s2">&quot;run_results.json&quot;</span><span class="p">,</span> <span class="n">run_step</span><span class="p">[</span><span class="s2">&quot;index&quot;</span><span class="p">]</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="n">JSONDecodeError</span><span class="p">:</span>
                    <span class="c1"># get the run results scoped to the step which had an error</span>
                    <span class="c1"># an error here indicates that either:</span>
                    <span class="c1"># 1) the fail-fast flag was set, in which case</span>
                    <span class="c1">#    the run_results.json file was never created; or</span>
                    <span class="c1"># 2) there was a problem on dbt Cloud&#39;s side saving</span>
                    <span class="c1">#    this artifact</span>
                    <span class="n">steps_override</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># we only need to find the individual nodes</span>
                    <span class="c1"># for those run commands</span>
                    <span class="n">run_results</span> <span class="o">=</span> <span class="n">run_artifact</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">]</span>
                    <span class="n">modified_command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_unsuccessful_commands</span><span class="p">(</span>
                        <span class="n">run_results</span><span class="o">=</span><span class="n">run_results</span><span class="p">,</span>
                        <span class="n">command_components</span><span class="o">=</span><span class="n">command_components</span><span class="p">,</span>
                        <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
                        <span class="n">exe_command</span><span class="o">=</span><span class="n">exe_command</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">steps_override</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">modified_command</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_job</span><span class="o">.</span><span class="n">trigger_job_run_options</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">trigger_job_run_options_override</span> <span class="o">=</span> <span class="n">TriggerJobRunOptions</span><span class="p">(</span>
                <span class="n">steps_override</span><span class="o">=</span><span class="n">steps_override</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">trigger_job_run_options_override</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_job</span><span class="o">.</span><span class="n">trigger_job_run_options</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="n">trigger_job_run_options_override</span><span class="o">.</span><span class="n">steps_override</span> <span class="o">=</span> <span class="n">steps_override</span>
        <span class="k">return</span> <span class="n">trigger_job_run_options_override</span>

    <span class="nd">@sync_compatible</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">retry_failed_steps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DbtCloudJobRun&quot;</span><span class="p">:</span>  <span class="c1"># noqa: F821</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retries steps that did not complete successfully in a run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A representation of the dbt Cloud job run.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">job</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_job</span><span class="o">.</span><span class="n">get_job</span><span class="p">()</span>
        <span class="n">run</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run</span><span class="p">()</span>

        <span class="n">trigger_job_run_options_override</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_trigger_job_run_options</span><span class="p">(</span>
            <span class="n">job</span><span class="o">=</span><span class="n">job</span><span class="p">,</span> <span class="n">run</span><span class="o">=</span><span class="n">run</span>
        <span class="p">)</span>

        <span class="n">num_steps</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">trigger_job_run_options_override</span><span class="o">.</span><span class="n">steps_override</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">num_steps</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="si">}</span><span class="s2"> does not have any steps to retry.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="si">}</span><span class="s2"> has </span><span class="si">{</span><span class="n">num_steps</span><span class="si">}</span><span class="s2"> steps to retry.&quot;</span><span class="p">)</span>
            <span class="n">run</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_job</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span>
                <span class="n">trigger_job_run_options</span><span class="o">=</span><span class="n">trigger_job_run_options_override</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">run</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<h4 id="prefect_dbt.cloud.jobs.DbtCloudJobRun-functions">Functions</h4>


<div class="doc doc-object doc-function">




<h5 id="prefect_dbt.cloud.jobs.DbtCloudJobRun.fetch_result" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">fetch_result</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Gets the results from the job run. Since the results
may not be ready, use wait_for_completion before calling this method.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>step</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The index of the step in the run to query for artifacts. The
first step in the run has the index 1. If the step parameter is
omitted, then this method will return the artifacts compiled
for the last step in the run.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sync_compatible</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the results from the job run. Since the results</span>
<span class="sd">    may not be ready, use wait_for_completion before calling this method.</span>

<span class="sd">    Args:</span>
<span class="sd">        step: The index of the step in the run to query for artifacts. The</span>
<span class="sd">            first step in the run has the index 1. If the step parameter is</span>
<span class="sd">            omitted, then this method will return the artifacts compiled</span>
<span class="sd">            for the last step in the run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">run_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run</span><span class="p">()</span>
    <span class="n">run_status</span> <span class="o">=</span> <span class="n">DbtCloudJobRunStatus</span><span class="p">(</span><span class="n">run_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">run_status</span> <span class="o">==</span> <span class="n">DbtCloudJobRunStatus</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_credentials</span><span class="o">.</span><span class="n">get_administrative_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>  <span class="c1"># noqa</span>
                <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">list_run_artifacts</span><span class="p">(</span>
                    <span class="n">run_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="n">step</span>
                <span class="p">)</span>
            <span class="n">run_data</span><span class="p">[</span><span class="s2">&quot;artifact_paths&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> completed successfully!&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DbtCloudListRunArtifactsFailed</span><span class="p">(</span><span class="n">extract_user_message</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>
        <span class="k">return</span> <span class="n">run_data</span>
    <span class="k">elif</span> <span class="n">run_status</span> <span class="o">==</span> <span class="n">DbtCloudJobRunStatus</span><span class="o">.</span><span class="n">CANCELLED</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DbtCloudJobRunCancelled</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="si">}</span><span class="s2"> was cancelled.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">run_status</span> <span class="o">==</span> <span class="n">DbtCloudJobRunStatus</span><span class="o">.</span><span class="n">FAILED</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DbtCloudJobRunFailed</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="si">}</span><span class="s2"> has failed.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DbtCloudJobRunIncomplete</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="si">}</span><span class="s2"> is still running; &quot;</span>
            <span class="s2">&quot;use wait_for_completion() to wait until results are ready.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="prefect_dbt.cloud.jobs.DbtCloudJobRun.get_run" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_run</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Makes a request to the dbt Cloud API to get the run data.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The run data.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sync_compatible</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Makes a request to the dbt Cloud API to get the run data.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The run data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">dbt_cloud_credentials</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_credentials</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">get_administrative_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">run_id</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DbtCloudGetRunFailed</span><span class="p">(</span><span class="n">extract_user_message</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>
    <span class="n">run_data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">run_data</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="prefect_dbt.cloud.jobs.DbtCloudJobRun.get_run_artifacts" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_run_artifacts</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Get an artifact generated for a completed run.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>path</code></td>
          <td>
                <code><span title="typing_extensions.Literal">Literal</span>[&#39;manifest.json&#39;, &#39;catalog.json&#39;, &#39;run_results.json&#39;]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The relative path to the run artifact.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>step</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The index of the step in the run to query for artifacts. The
first step in the run has the index 1. If the step parameter is
omitted, then this method will return the artifacts compiled
for the last step in the run.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>], str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The contents of the requested manifest. Returns a <code>Dict</code> if the
requested artifact is a JSON file and a <code>str</code> otherwise.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sync_compatible</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_run_artifacts</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;manifest.json&quot;</span><span class="p">,</span> <span class="s2">&quot;catalog.json&quot;</span><span class="p">,</span> <span class="s2">&quot;run_results.json&quot;</span><span class="p">],</span>
    <span class="n">step</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get an artifact generated for a completed run.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: The relative path to the run artifact.</span>
<span class="sd">        step: The index of the step in the run to query for artifacts. The</span>
<span class="sd">            first step in the run has the index 1. If the step parameter is</span>
<span class="sd">            omitted, then this method will return the artifacts compiled</span>
<span class="sd">            for the last step in the run.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The contents of the requested manifest. Returns a `Dict` if the</span>
<span class="sd">            requested artifact is a JSON file and a `str` otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">dbt_cloud_credentials</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_credentials</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">get_administrative_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_run_artifact</span><span class="p">(</span>
                <span class="n">run_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="n">step</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DbtCloudGetRunArtifactFailed</span><span class="p">(</span><span class="n">extract_user_message</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>

    <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.json&quot;</span><span class="p">):</span>
        <span class="n">artifact_contents</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">artifact_contents</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="n">artifact_contents</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="prefect_dbt.cloud.jobs.DbtCloudJobRun.get_status_code" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_status_code</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Makes a request to the dbt Cloud API to get the run status.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The run status code.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sync_compatible</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_status_code</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Makes a request to the dbt Cloud API to get the run status.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The run status code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">run_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run</span><span class="p">()</span>
    <span class="n">run_status_code</span> <span class="o">=</span> <span class="n">run_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">run_status_code</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="prefect_dbt.cloud.jobs.DbtCloudJobRun.retry_failed_steps" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">retry_failed_steps</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Retries steps that did not complete successfully in a run.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_dbt.cloud.jobs.DbtCloudJobRun" href="#prefect_dbt.cloud.jobs.DbtCloudJobRun">DbtCloudJobRun</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A representation of the dbt Cloud job run.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sync_compatible</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">retry_failed_steps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DbtCloudJobRun&quot;</span><span class="p">:</span>  <span class="c1"># noqa: F821</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retries steps that did not complete successfully in a run.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A representation of the dbt Cloud job run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">job</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_job</span><span class="o">.</span><span class="n">get_job</span><span class="p">()</span>
    <span class="n">run</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run</span><span class="p">()</span>

    <span class="n">trigger_job_run_options_override</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_trigger_job_run_options</span><span class="p">(</span>
        <span class="n">job</span><span class="o">=</span><span class="n">job</span><span class="p">,</span> <span class="n">run</span><span class="o">=</span><span class="n">run</span>
    <span class="p">)</span>

    <span class="n">num_steps</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">trigger_job_run_options_override</span><span class="o">.</span><span class="n">steps_override</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">num_steps</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="si">}</span><span class="s2"> does not have any steps to retry.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_prefix</span><span class="si">}</span><span class="s2"> has </span><span class="si">{</span><span class="n">num_steps</span><span class="si">}</span><span class="s2"> steps to retry.&quot;</span><span class="p">)</span>
        <span class="n">run</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_job</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span>
            <span class="n">trigger_job_run_options</span><span class="o">=</span><span class="n">trigger_job_run_options_override</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">run</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="prefect_dbt.cloud.jobs.DbtCloudJobRun.wait_for_completion" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">wait_for_completion</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Waits for the job run to reach a terminal state.</p>

          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sync_compatible</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">wait_for_completion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Waits for the job run to reach a terminal state.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_until_state</span><span class="p">(</span>
        <span class="n">in_final_state_fn</span><span class="o">=</span><span class="n">DbtCloudJobRunStatus</span><span class="o">.</span><span class="n">is_terminal_status_code</span><span class="p">,</span>
        <span class="n">get_state_fn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_status_code</span><span class="p">,</span>
        <span class="n">log_state_fn</span><span class="o">=</span><span class="n">DbtCloudJobRunStatus</span><span class="p">,</span>
        <span class="n">timeout_seconds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_job</span><span class="o">.</span><span class="n">timeout_seconds</span><span class="p">,</span>
        <span class="n">interval_seconds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dbt_cloud_job</span><span class="o">.</span><span class="n">interval_seconds</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>
<h2 id="prefect_dbt.cloud.jobs-functions">Functions</h2>


<div class="doc doc-object doc-function">




<h3 id="prefect_dbt.cloud.jobs.get_dbt_cloud_job_info" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_dbt_cloud_job_info</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>A task to retrieve information about a dbt Cloud job.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dbt_cloud_credentials</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_dbt.cloud.credentials.DbtCloudCredentials" href="../credentials/#prefect_dbt.cloud.credentials.DbtCloudCredentials">DbtCloudCredentials</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Credentials for authenticating with dbt Cloud.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>job_id</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The ID of the job to get.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The job data returned by the dbt Cloud administrative API.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="example" open>
  <summary>Example</summary>
  <p>Get status of a dbt Cloud job:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>

<span class="kn">from</span> <span class="nn">prefect_dbt.cloud</span> <span class="kn">import</span> <span class="n">DbtCloudCredentials</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud.jobs</span> <span class="kn">import</span> <span class="n">get_job</span>

<span class="nd">@flow</span>
<span class="k">def</span> <span class="nf">get_job_flow</span><span class="p">():</span>
    <span class="n">credentials</span> <span class="o">=</span> <span class="n">DbtCloudCredentials</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;my_api_key&quot;</span><span class="p">,</span> <span class="n">account_id</span><span class="o">=</span><span class="mi">123456789</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">get_job</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">,</span>
        <span class="n">job_id</span><span class="o">=</span><span class="mi">42</span>
    <span class="p">)</span>

<span class="n">get_job_flow</span><span class="p">()</span>
</code></pre></div></p>
</details>
          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@task</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Get dbt Cloud job details&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Retrieves details of a dbt Cloud job &quot;</span>
    <span class="s2">&quot;for the job with the given job_id.&quot;</span><span class="p">,</span>
    <span class="n">retries</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">retry_delay_seconds</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_dbt_cloud_job_info</span><span class="p">(</span>
    <span class="n">dbt_cloud_credentials</span><span class="p">:</span> <span class="n">DbtCloudCredentials</span><span class="p">,</span>
    <span class="n">job_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">order_by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A task to retrieve information about a dbt Cloud job.</span>

<span class="sd">    Args:</span>
<span class="sd">        dbt_cloud_credentials: Credentials for authenticating with dbt Cloud.</span>
<span class="sd">        job_id: The ID of the job to get.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The job data returned by the dbt Cloud administrative API.</span>

<span class="sd">    Example:</span>
<span class="sd">        Get status of a dbt Cloud job:</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import flow</span>

<span class="sd">        from prefect_dbt.cloud import DbtCloudCredentials</span>
<span class="sd">        from prefect_dbt.cloud.jobs import get_job</span>

<span class="sd">        @flow</span>
<span class="sd">        def get_job_flow():</span>
<span class="sd">            credentials = DbtCloudCredentials(api_key=&quot;my_api_key&quot;, account_id=123456789)</span>

<span class="sd">            return get_job(</span>
<span class="sd">                dbt_cloud_credentials=credentials,</span>
<span class="sd">                job_id=42</span>
<span class="sd">            )</span>

<span class="sd">        get_job_flow()</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">get_administrative_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_job</span><span class="p">(</span>
                <span class="n">job_id</span><span class="o">=</span><span class="n">job_id</span><span class="p">,</span>
                <span class="n">order_by</span><span class="o">=</span><span class="n">order_by</span><span class="p">,</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DbtCloudGetJobFailed</span><span class="p">(</span><span class="n">extract_user_message</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="prefect_dbt.cloud.jobs.get_run_id" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_run_id</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Task that extracts the run ID from a trigger job run API response,</p>
<p>This task is mainly used to maintain dependency tracking between the
<code>trigger_dbt_cloud_job_run</code> task and downstream tasks/flows that use the run ID.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>obj</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The JSON body from the trigger job run response.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud</span> <span class="kn">import</span> <span class="n">DbtCloudCredentials</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud.jobs</span> <span class="kn">import</span> <span class="n">trigger_dbt_cloud_job_run</span><span class="p">,</span> <span class="n">get_run_id</span>


<span class="nd">@flow</span>
<span class="k">def</span> <span class="nf">trigger_run_and_get_id</span><span class="p">():</span>
    <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">DbtCloudCredentials</span><span class="p">(</span>
            <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;my_api_key&quot;</span><span class="p">,</span>
            <span class="n">account_id</span><span class="o">=</span><span class="mi">123456789</span>
        <span class="p">)</span>

    <span class="n">triggered_run_data</span> <span class="o">=</span> <span class="n">trigger_dbt_cloud_job_run</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">dbt_cloud_credentials</span><span class="p">,</span>
        <span class="n">job_id</span><span class="o">=</span><span class="n">job_id</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="n">trigger_job_run_options</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">run_id</span> <span class="o">=</span> <span class="n">get_run_id</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">triggered_run_data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">run_id</span>

<span class="n">trigger_run_and_get_id</span><span class="p">()</span>
</code></pre></div>
</details>
          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@task</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Get dbt Cloud job run ID&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Extracts the run ID from a trigger job run API response&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">get_run_id</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Task that extracts the run ID from a trigger job run API response,</span>

<span class="sd">    This task is mainly used to maintain dependency tracking between the</span>
<span class="sd">    `trigger_dbt_cloud_job_run` task and downstream tasks/flows that use the run ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: The JSON body from the trigger job run response.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import flow</span>
<span class="sd">        from prefect_dbt.cloud import DbtCloudCredentials</span>
<span class="sd">        from prefect_dbt.cloud.jobs import trigger_dbt_cloud_job_run, get_run_id</span>


<span class="sd">        @flow</span>
<span class="sd">        def trigger_run_and_get_id():</span>
<span class="sd">            dbt_cloud_credentials=DbtCloudCredentials(</span>
<span class="sd">                    api_key=&quot;my_api_key&quot;,</span>
<span class="sd">                    account_id=123456789</span>
<span class="sd">                )</span>

<span class="sd">            triggered_run_data = trigger_dbt_cloud_job_run(</span>
<span class="sd">                dbt_cloud_credentials=dbt_cloud_credentials,</span>
<span class="sd">                job_id=job_id,</span>
<span class="sd">                options=trigger_job_run_options,</span>
<span class="sd">            )</span>
<span class="sd">            run_id = get_run_id.submit(triggered_run_data)</span>
<span class="sd">            return run_id</span>

<span class="sd">        trigger_run_and_get_id()</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unable to determine run ID for triggered job.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">id</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="prefect_dbt.cloud.jobs.retry_dbt_cloud_job_run_subset_and_wait_for_completion" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">retry_dbt_cloud_job_run_subset_and_wait_for_completion</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Flow that retrys a subset of dbt Cloud job run, filtered by select statuses,
and waits for the triggered retry to complete.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dbt_cloud_credentials</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_dbt.cloud.credentials.DbtCloudCredentials" href="../credentials/#prefect_dbt.cloud.credentials.DbtCloudCredentials">DbtCloudCredentials</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Credentials for authenticating with dbt Cloud.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>trigger_job_run_options</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="prefect_dbt.cloud.models.TriggerJobRunOptions" href="../models/#prefect_dbt.cloud.models.TriggerJobRunOptions">TriggerJobRunOptions</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An optional TriggerJobRunOptions instance to
specify overrides for the triggered job run.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>max_wait_seconds</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Maximum number of seconds to wait for job to complete</p>
            </div>
          </td>
          <td>
                <code>900</code>
          </td>
        </tr>
        <tr>
          <td><code>poll_frequency_seconds</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Number of seconds to wait in between checks for
run completion.</p>
            </div>
          </td>
          <td>
                <code>10</code>
          </td>
        </tr>
        <tr>
          <td><code>run_id</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The ID of the job run to retry.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If <code>trigger_job_run_options.steps_override</code> is set by the user.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The run data returned by the dbt Cloud administrative API.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <p>Retry a subset of models in a dbt Cloud job run and wait for completion:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>

<span class="kn">from</span> <span class="nn">prefect_dbt.cloud</span> <span class="kn">import</span> <span class="n">DbtCloudCredentials</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud.jobs</span> <span class="kn">import</span> <span class="n">retry_dbt_cloud_job_run_subset_and_wait_for_completion</span>

<span class="nd">@flow</span>
<span class="k">def</span> <span class="nf">retry_dbt_cloud_job_run_subset_and_wait_for_completion_flow</span><span class="p">():</span>
    <span class="n">credentials</span> <span class="o">=</span> <span class="n">DbtCloudCredentials</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;MY_BLOCK_NAME&quot;</span><span class="p">)</span>
    <span class="n">retry_dbt_cloud_job_run_subset_and_wait_for_completion</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">,</span>
        <span class="n">run_id</span><span class="o">=</span><span class="mi">88640123</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">retry_dbt_cloud_job_run_subset_and_wait_for_completion_flow</span><span class="p">()</span>
</code></pre></div></p>

          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@flow</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Retry subset of dbt Cloud job run and wait for completion&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="p">(</span>
        <span class="s2">&quot;Retries a subset of dbt Cloud job run, filtered by select statuses, &quot;</span>
        <span class="s2">&quot;and waits for the triggered retry to complete.&quot;</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">retry_dbt_cloud_job_run_subset_and_wait_for_completion</span><span class="p">(</span>
    <span class="n">dbt_cloud_credentials</span><span class="p">:</span> <span class="n">DbtCloudCredentials</span><span class="p">,</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">trigger_job_run_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TriggerJobRunOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_wait_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">900</span><span class="p">,</span>
    <span class="n">poll_frequency_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Flow that retrys a subset of dbt Cloud job run, filtered by select statuses,</span>
<span class="sd">    and waits for the triggered retry to complete.</span>

<span class="sd">    Args:</span>
<span class="sd">        dbt_cloud_credentials: Credentials for authenticating with dbt Cloud.</span>
<span class="sd">        trigger_job_run_options: An optional TriggerJobRunOptions instance to</span>
<span class="sd">            specify overrides for the triggered job run.</span>
<span class="sd">        max_wait_seconds: Maximum number of seconds to wait for job to complete</span>
<span class="sd">        poll_frequency_seconds: Number of seconds to wait in between checks for</span>
<span class="sd">            run completion.</span>
<span class="sd">        run_id: The ID of the job run to retry.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If `trigger_job_run_options.steps_override` is set by the user.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The run data returned by the dbt Cloud administrative API.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Retry a subset of models in a dbt Cloud job run and wait for completion:</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import flow</span>

<span class="sd">        from prefect_dbt.cloud import DbtCloudCredentials</span>
<span class="sd">        from prefect_dbt.cloud.jobs import retry_dbt_cloud_job_run_subset_and_wait_for_completion</span>

<span class="sd">        @flow</span>
<span class="sd">        def retry_dbt_cloud_job_run_subset_and_wait_for_completion_flow():</span>
<span class="sd">            credentials = DbtCloudCredentials.load(&quot;MY_BLOCK_NAME&quot;)</span>
<span class="sd">            retry_dbt_cloud_job_run_subset_and_wait_for_completion(</span>
<span class="sd">                dbt_cloud_credentials=credentials,</span>
<span class="sd">                run_id=88640123,</span>
<span class="sd">            )</span>

<span class="sd">        retry_dbt_cloud_job_run_subset_and_wait_for_completion_flow()</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>
    <span class="k">if</span> <span class="n">trigger_job_run_options</span> <span class="ow">and</span> <span class="n">trigger_job_run_options</span><span class="o">.</span><span class="n">steps_override</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Do not set `steps_override` in `trigger_job_run_options` &quot;</span>
            <span class="s2">&quot;because this flow will automatically set it&quot;</span>
        <span class="p">)</span>

    <span class="n">run_info_future</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_dbt_cloud_run_info</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">dbt_cloud_credentials</span><span class="p">,</span>
        <span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
        <span class="n">include_related</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;run_steps&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">run_info</span> <span class="o">=</span> <span class="k">await</span> <span class="n">run_info_future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

    <span class="n">job_id</span> <span class="o">=</span> <span class="n">run_info</span><span class="p">[</span><span class="s2">&quot;job_id&quot;</span><span class="p">]</span>
    <span class="n">job_info_future</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_dbt_cloud_job_info</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">dbt_cloud_credentials</span><span class="p">,</span>
        <span class="n">job_id</span><span class="o">=</span><span class="n">job_id</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">job_info</span> <span class="o">=</span> <span class="k">await</span> <span class="n">job_info_future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

    <span class="n">trigger_job_run_options_override</span> <span class="o">=</span> <span class="k">await</span> <span class="n">_build_trigger_job_run_options</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">dbt_cloud_credentials</span><span class="p">,</span>
        <span class="n">trigger_job_run_options</span><span class="o">=</span><span class="n">trigger_job_run_options</span><span class="p">,</span>
        <span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
        <span class="n">run_info</span><span class="o">=</span><span class="n">run_info</span><span class="p">,</span>
        <span class="n">job_info</span><span class="o">=</span><span class="n">job_info</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># to circumvent `RuntimeError: The task runner is already started!`</span>
    <span class="n">flow_run_context</span> <span class="o">=</span> <span class="n">FlowRunContext</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">task_runner_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">flow_run_context</span><span class="o">.</span><span class="n">task_runner</span><span class="p">)</span>

    <span class="n">run_data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">trigger_dbt_cloud_job_run_and_wait_for_completion</span><span class="o">.</span><span class="n">with_options</span><span class="p">(</span>
        <span class="n">task_runner</span><span class="o">=</span><span class="n">task_runner_type</span><span class="p">()</span>
    <span class="p">)(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">dbt_cloud_credentials</span><span class="p">,</span>
        <span class="n">job_id</span><span class="o">=</span><span class="n">job_id</span><span class="p">,</span>
        <span class="n">retry_filtered_models_attempts</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">trigger_job_run_options</span><span class="o">=</span><span class="n">trigger_job_run_options_override</span><span class="p">,</span>
        <span class="n">max_wait_seconds</span><span class="o">=</span><span class="n">max_wait_seconds</span><span class="p">,</span>
        <span class="n">poll_frequency_seconds</span><span class="o">=</span><span class="n">poll_frequency_seconds</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">run_data</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="prefect_dbt.cloud.jobs.run_dbt_cloud_job" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run_dbt_cloud_job</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Flow that triggers and waits for a dbt Cloud job run, retrying a
subset of failed nodes if necessary.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dbt_cloud_job</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_dbt.cloud.jobs.DbtCloudJob" href="#prefect_dbt.cloud.jobs.DbtCloudJob">DbtCloudJob</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Block that holds the information and
methods to interact with a dbt Cloud job.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>targeted_retries</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The number of times to retry failed steps.</p>
            </div>
          </td>
          <td>
                <code>3</code>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud</span> <span class="kn">import</span> <span class="n">DbtCloudCredentials</span><span class="p">,</span> <span class="n">DbtCloudJob</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud.jobs</span> <span class="kn">import</span> <span class="n">run_dbt_cloud_job</span>

<span class="nd">@flow</span>
<span class="k">def</span> <span class="nf">run_dbt_cloud_job_flow</span><span class="p">():</span>
    <span class="n">dbt_cloud_credentials</span> <span class="o">=</span> <span class="n">DbtCloudCredentials</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;dbt-token&quot;</span><span class="p">)</span>
    <span class="n">dbt_cloud_job</span> <span class="o">=</span> <span class="n">DbtCloudJob</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">dbt_cloud_credentials</span><span class="p">,</span> <span class="n">job_id</span><span class="o">=</span><span class="mi">154217</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">run_dbt_cloud_job</span><span class="p">(</span><span class="n">dbt_cloud_job</span><span class="o">=</span><span class="n">dbt_cloud_job</span><span class="p">)</span>

<span class="n">run_dbt_cloud_job_flow</span><span class="p">()</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@flow</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">run_dbt_cloud_job</span><span class="p">(</span>
    <span class="n">dbt_cloud_job</span><span class="p">:</span> <span class="n">DbtCloudJob</span><span class="p">,</span>
    <span class="n">targeted_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Flow that triggers and waits for a dbt Cloud job run, retrying a</span>
<span class="sd">    subset of failed nodes if necessary.</span>

<span class="sd">    Args:</span>
<span class="sd">        dbt_cloud_job: Block that holds the information and</span>
<span class="sd">            methods to interact with a dbt Cloud job.</span>
<span class="sd">        targeted_retries: The number of times to retry failed steps.</span>

<span class="sd">    Examples:</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import flow</span>
<span class="sd">        from prefect_dbt.cloud import DbtCloudCredentials, DbtCloudJob</span>
<span class="sd">        from prefect_dbt.cloud.jobs import run_dbt_cloud_job</span>

<span class="sd">        @flow</span>
<span class="sd">        def run_dbt_cloud_job_flow():</span>
<span class="sd">            dbt_cloud_credentials = DbtCloudCredentials.load(&quot;dbt-token&quot;)</span>
<span class="sd">            dbt_cloud_job = DbtCloudJob(</span>
<span class="sd">                dbt_cloud_credentials=dbt_cloud_credentials, job_id=154217</span>
<span class="sd">            )</span>
<span class="sd">            return run_dbt_cloud_job(dbt_cloud_job=dbt_cloud_job)</span>

<span class="sd">        run_dbt_cloud_job_flow()</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">get_run_logger</span><span class="p">()</span>

    <span class="n">run</span> <span class="o">=</span> <span class="k">await</span> <span class="n">task</span><span class="p">(</span><span class="n">dbt_cloud_job</span><span class="o">.</span><span class="n">trigger</span><span class="o">.</span><span class="n">aio</span><span class="p">)(</span><span class="n">dbt_cloud_job</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">targeted_retries</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">task</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="o">.</span><span class="n">aio</span><span class="p">)(</span><span class="n">run</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">task</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">fetch_result</span><span class="o">.</span><span class="n">aio</span><span class="p">)(</span><span class="n">run</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">except</span> <span class="n">DbtCloudJobRunFailed</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Retrying job run with ID: </span><span class="si">{</span><span class="n">run</span><span class="o">.</span><span class="n">run_id</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">targeted_retries</span><span class="si">}</span><span class="s2"> more times&quot;</span>
            <span class="p">)</span>
            <span class="n">run</span> <span class="o">=</span> <span class="k">await</span> <span class="n">task</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">retry_failed_steps</span><span class="o">.</span><span class="n">aio</span><span class="p">)(</span><span class="n">run</span><span class="p">)</span>
            <span class="n">targeted_retries</span> <span class="o">-=</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="prefect_dbt.cloud.jobs.trigger_dbt_cloud_job_run" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">trigger_dbt_cloud_job_run</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>A task to trigger a dbt Cloud job run.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dbt_cloud_credentials</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_dbt.cloud.credentials.DbtCloudCredentials" href="../credentials/#prefect_dbt.cloud.credentials.DbtCloudCredentials">DbtCloudCredentials</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Credentials for authenticating with dbt Cloud.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>job_id</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The ID of the job to trigger.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>options</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="prefect_dbt.cloud.models.TriggerJobRunOptions" href="../models/#prefect_dbt.cloud.models.TriggerJobRunOptions">TriggerJobRunOptions</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An optional TriggerJobRunOptions instance to specify overrides
for the triggered job run.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The run data returned from the dbt Cloud administrative API.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <p>Trigger a dbt Cloud job run:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>

<span class="kn">from</span> <span class="nn">prefect_dbt.cloud</span> <span class="kn">import</span> <span class="n">DbtCloudCredentials</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud.jobs</span> <span class="kn">import</span> <span class="n">trigger_dbt_cloud_job_run</span>


<span class="nd">@flow</span>
<span class="k">def</span> <span class="nf">trigger_dbt_cloud_job_run_flow</span><span class="p">():</span>
    <span class="n">credentials</span> <span class="o">=</span> <span class="n">DbtCloudCredentials</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;my_api_key&quot;</span><span class="p">,</span> <span class="n">account_id</span><span class="o">=</span><span class="mi">123456789</span><span class="p">)</span>

    <span class="n">trigger_dbt_cloud_job_run</span><span class="p">(</span><span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">,</span> <span class="n">job_id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>


<span class="n">trigger_dbt_cloud_job_run_flow</span><span class="p">()</span>
</code></pre></div></p>
<p>Trigger a dbt Cloud job run with overrides:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>

<span class="kn">from</span> <span class="nn">prefect_dbt.cloud</span> <span class="kn">import</span> <span class="n">DbtCloudCredentials</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud.jobs</span> <span class="kn">import</span> <span class="n">trigger_dbt_cloud_job_run</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud.models</span> <span class="kn">import</span> <span class="n">TriggerJobRunOptions</span>


<span class="nd">@flow</span>
<span class="k">def</span> <span class="nf">trigger_dbt_cloud_job_run_flow</span><span class="p">():</span>
    <span class="n">credentials</span> <span class="o">=</span> <span class="n">DbtCloudCredentials</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;my_api_key&quot;</span><span class="p">,</span> <span class="n">account_id</span><span class="o">=</span><span class="mi">123456789</span><span class="p">)</span>

    <span class="n">trigger_dbt_cloud_job_run</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">,</span>
        <span class="n">job_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="n">TriggerJobRunOptions</span><span class="p">(</span>
            <span class="n">git_branch</span><span class="o">=</span><span class="s2">&quot;staging&quot;</span><span class="p">,</span>
            <span class="n">schema_override</span><span class="o">=</span><span class="s2">&quot;dbt_cloud_pr_123&quot;</span><span class="p">,</span>
            <span class="n">dbt_version_override</span><span class="o">=</span><span class="s2">&quot;0.18.0&quot;</span><span class="p">,</span>
            <span class="n">target_name_override</span><span class="o">=</span><span class="s2">&quot;staging&quot;</span><span class="p">,</span>
            <span class="n">timeout_seconds_override</span><span class="o">=</span><span class="mi">3000</span><span class="p">,</span>
            <span class="n">generate_docs_override</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">threads_override</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
            <span class="n">steps_override</span><span class="o">=</span><span class="p">[</span>
                <span class="s2">&quot;dbt seed&quot;</span><span class="p">,</span>
                <span class="s2">&quot;dbt run --fail-fast&quot;</span><span class="p">,</span>
                <span class="s2">&quot;dbt test --fail-fast&quot;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="n">trigger_dbt_cloud_job_run</span><span class="p">()</span>
</code></pre></div></p>

          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@task</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Trigger dbt Cloud job run&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Triggers a dbt Cloud job run for the job &quot;</span>
    <span class="s2">&quot;with the given job_id and optional overrides.&quot;</span><span class="p">,</span>
    <span class="n">retries</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">retry_delay_seconds</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">trigger_dbt_cloud_job_run</span><span class="p">(</span>
    <span class="n">dbt_cloud_credentials</span><span class="p">:</span> <span class="n">DbtCloudCredentials</span><span class="p">,</span>
    <span class="n">job_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TriggerJobRunOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A task to trigger a dbt Cloud job run.</span>

<span class="sd">    Args:</span>
<span class="sd">        dbt_cloud_credentials: Credentials for authenticating with dbt Cloud.</span>
<span class="sd">        job_id: The ID of the job to trigger.</span>
<span class="sd">        options: An optional TriggerJobRunOptions instance to specify overrides</span>
<span class="sd">            for the triggered job run.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The run data returned from the dbt Cloud administrative API.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Trigger a dbt Cloud job run:</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import flow</span>

<span class="sd">        from prefect_dbt.cloud import DbtCloudCredentials</span>
<span class="sd">        from prefect_dbt.cloud.jobs import trigger_dbt_cloud_job_run</span>


<span class="sd">        @flow</span>
<span class="sd">        def trigger_dbt_cloud_job_run_flow():</span>
<span class="sd">            credentials = DbtCloudCredentials(api_key=&quot;my_api_key&quot;, account_id=123456789)</span>

<span class="sd">            trigger_dbt_cloud_job_run(dbt_cloud_credentials=credentials, job_id=1)</span>


<span class="sd">        trigger_dbt_cloud_job_run_flow()</span>
<span class="sd">        ```</span>

<span class="sd">        Trigger a dbt Cloud job run with overrides:</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import flow</span>

<span class="sd">        from prefect_dbt.cloud import DbtCloudCredentials</span>
<span class="sd">        from prefect_dbt.cloud.jobs import trigger_dbt_cloud_job_run</span>
<span class="sd">        from prefect_dbt.cloud.models import TriggerJobRunOptions</span>


<span class="sd">        @flow</span>
<span class="sd">        def trigger_dbt_cloud_job_run_flow():</span>
<span class="sd">            credentials = DbtCloudCredentials(api_key=&quot;my_api_key&quot;, account_id=123456789)</span>

<span class="sd">            trigger_dbt_cloud_job_run(</span>
<span class="sd">                dbt_cloud_credentials=credentials,</span>
<span class="sd">                job_id=1,</span>
<span class="sd">                options=TriggerJobRunOptions(</span>
<span class="sd">                    git_branch=&quot;staging&quot;,</span>
<span class="sd">                    schema_override=&quot;dbt_cloud_pr_123&quot;,</span>
<span class="sd">                    dbt_version_override=&quot;0.18.0&quot;,</span>
<span class="sd">                    target_name_override=&quot;staging&quot;,</span>
<span class="sd">                    timeout_seconds_override=3000,</span>
<span class="sd">                    generate_docs_override=True,</span>
<span class="sd">                    threads_override=8,</span>
<span class="sd">                    steps_override=[</span>
<span class="sd">                        &quot;dbt seed&quot;,</span>
<span class="sd">                        &quot;dbt run --fail-fast&quot;,</span>
<span class="sd">                        &quot;dbt test --fail-fast&quot;,</span>
<span class="sd">                    ],</span>
<span class="sd">                ),</span>
<span class="sd">            )</span>


<span class="sd">        trigger_dbt_cloud_job_run()</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">get_run_logger</span><span class="p">()</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Triggering run for job with ID </span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">get_administrative_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">trigger_job_run</span><span class="p">(</span><span class="n">job_id</span><span class="o">=</span><span class="n">job_id</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DbtCloudJobRunTriggerFailed</span><span class="p">(</span><span class="n">extract_user_message</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>

    <span class="n">run_data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="s2">&quot;project_id&quot;</span> <span class="ow">in</span> <span class="n">run_data</span> <span class="ow">and</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">run_data</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Run successfully triggered for job with ID </span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2">. &quot;</span>
            <span class="s2">&quot;You can view the status of this run at &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">domain</span><span class="si">}</span><span class="s2">/#/accounts/&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dbt_cloud_credentials</span><span class="o">.</span><span class="n">account_id</span><span class="si">}</span><span class="s2">/projects/</span><span class="si">{</span><span class="n">run_data</span><span class="p">[</span><span class="s1">&#39;project_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;runs/</span><span class="si">{</span><span class="n">run_data</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">run_data</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="prefect_dbt.cloud.jobs.trigger_dbt_cloud_job_run_and_wait_for_completion" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">trigger_dbt_cloud_job_run_and_wait_for_completion</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Flow that triggers a job run and waits for the triggered run to complete.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dbt_cloud_credentials</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_dbt.cloud.credentials.DbtCloudCredentials" href="../credentials/#prefect_dbt.cloud.credentials.DbtCloudCredentials">DbtCloudCredentials</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Credentials for authenticating with dbt Cloud.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>job_id</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The ID of the job to trigger.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>trigger_job_run_options</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="prefect_dbt.cloud.models.TriggerJobRunOptions" href="../models/#prefect_dbt.cloud.models.TriggerJobRunOptions">TriggerJobRunOptions</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An optional TriggerJobRunOptions instance to
specify overrides for the triggered job run.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>max_wait_seconds</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Maximum number of seconds to wait for job to complete</p>
            </div>
          </td>
          <td>
                <code>900</code>
          </td>
        </tr>
        <tr>
          <td><code>poll_frequency_seconds</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Number of seconds to wait in between checks for
run completion.</p>
            </div>
          </td>
          <td>
                <code>10</code>
          </td>
        </tr>
        <tr>
          <td><code>retry_filtered_models_attempts</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Number of times to retry models selected by <code>retry_status_filters</code>.</p>
            </div>
          </td>
          <td>
                <code>3</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="prefect_dbt.cloud.exceptions.DbtCloudJobRunCancelled">DbtCloudJobRunCancelled</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The triggered dbt Cloud job run was cancelled.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="prefect_dbt.cloud.exceptions.DbtCloudJobRunFailed">DbtCloudJobRunFailed</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The triggered dbt Cloud job run failed.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>RuntimeError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The triggered dbt Cloud job run ended in an unexpected state.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The run data returned by the dbt Cloud administrative API.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <p>Trigger a dbt Cloud job and wait for completion as a stand alone flow:
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud</span> <span class="kn">import</span> <span class="n">DbtCloudCredentials</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud.jobs</span> <span class="kn">import</span> <span class="n">trigger_dbt_cloud_job_run_and_wait_for_completion</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="n">trigger_dbt_cloud_job_run_and_wait_for_completion</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">DbtCloudCredentials</span><span class="p">(</span>
            <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;my_api_key&quot;</span><span class="p">,</span>
            <span class="n">account_id</span><span class="o">=</span><span class="mi">123456789</span>
        <span class="p">),</span>
        <span class="n">job_id</span><span class="o">=</span><span class="mi">1</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre></div></p>
<p>Trigger a dbt Cloud job and wait for completion as a sub-flow:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud</span> <span class="kn">import</span> <span class="n">DbtCloudCredentials</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud.jobs</span> <span class="kn">import</span> <span class="n">trigger_dbt_cloud_job_run_and_wait_for_completion</span>

<span class="nd">@flow</span>
<span class="k">def</span> <span class="nf">my_flow</span><span class="p">():</span>
    <span class="o">...</span>
    <span class="n">run_result</span> <span class="o">=</span> <span class="n">trigger_dbt_cloud_job_run_and_wait_for_completion</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">DbtCloudCredentials</span><span class="p">(</span>
            <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;my_api_key&quot;</span><span class="p">,</span>
            <span class="n">account_id</span><span class="o">=</span><span class="mi">123456789</span>
        <span class="p">),</span>
        <span class="n">job_id</span><span class="o">=</span><span class="mi">1</span>
    <span class="p">)</span>
    <span class="o">...</span>

<span class="n">my_flow</span><span class="p">()</span>
</code></pre></div></p>
<p>Trigger a dbt Cloud job with overrides:
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud</span> <span class="kn">import</span> <span class="n">DbtCloudCredentials</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud.jobs</span> <span class="kn">import</span> <span class="n">trigger_dbt_cloud_job_run_and_wait_for_completion</span>
<span class="kn">from</span> <span class="nn">prefect_dbt.cloud.models</span> <span class="kn">import</span> <span class="n">TriggerJobRunOptions</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="n">trigger_dbt_cloud_job_run_and_wait_for_completion</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">DbtCloudCredentials</span><span class="p">(</span>
            <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;my_api_key&quot;</span><span class="p">,</span>
            <span class="n">account_id</span><span class="o">=</span><span class="mi">123456789</span>
        <span class="p">),</span>
        <span class="n">job_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">trigger_job_run_options</span><span class="o">=</span><span class="n">TriggerJobRunOptions</span><span class="p">(</span>
            <span class="n">git_branch</span><span class="o">=</span><span class="s2">&quot;staging&quot;</span><span class="p">,</span>
            <span class="n">schema_override</span><span class="o">=</span><span class="s2">&quot;dbt_cloud_pr_123&quot;</span><span class="p">,</span>
            <span class="n">dbt_version_override</span><span class="o">=</span><span class="s2">&quot;0.18.0&quot;</span><span class="p">,</span>
            <span class="n">target_name_override</span><span class="o">=</span><span class="s2">&quot;staging&quot;</span><span class="p">,</span>
            <span class="n">timeout_seconds_override</span><span class="o">=</span><span class="mi">3000</span><span class="p">,</span>
            <span class="n">generate_docs_override</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">threads_override</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
            <span class="n">steps_override</span><span class="o">=</span><span class="p">[</span>
                <span class="s2">&quot;dbt seed&quot;</span><span class="p">,</span>
                <span class="s2">&quot;dbt run --fail-fast&quot;</span><span class="p">,</span>
                <span class="s2">&quot;dbt test --fail fast&quot;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">),</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre></div></p>

          <details class="quote">
            <summary>Source code in <code>prefect_dbt/cloud/jobs.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@flow</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Trigger dbt Cloud job run and wait for completion&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Triggers a dbt Cloud job run and waits for the&quot;</span>
    <span class="s2">&quot;triggered run to complete.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">trigger_dbt_cloud_job_run_and_wait_for_completion</span><span class="p">(</span>
    <span class="n">dbt_cloud_credentials</span><span class="p">:</span> <span class="n">DbtCloudCredentials</span><span class="p">,</span>
    <span class="n">job_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">trigger_job_run_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TriggerJobRunOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_wait_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">900</span><span class="p">,</span>
    <span class="n">poll_frequency_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">retry_filtered_models_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Flow that triggers a job run and waits for the triggered run to complete.</span>

<span class="sd">    Args:</span>
<span class="sd">        dbt_cloud_credentials: Credentials for authenticating with dbt Cloud.</span>
<span class="sd">        job_id: The ID of the job to trigger.</span>
<span class="sd">        trigger_job_run_options: An optional TriggerJobRunOptions instance to</span>
<span class="sd">            specify overrides for the triggered job run.</span>
<span class="sd">        max_wait_seconds: Maximum number of seconds to wait for job to complete</span>
<span class="sd">        poll_frequency_seconds: Number of seconds to wait in between checks for</span>
<span class="sd">            run completion.</span>
<span class="sd">        retry_filtered_models_attempts: Number of times to retry models selected by `retry_status_filters`.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DbtCloudJobRunCancelled: The triggered dbt Cloud job run was cancelled.</span>
<span class="sd">        DbtCloudJobRunFailed: The triggered dbt Cloud job run failed.</span>
<span class="sd">        RuntimeError: The triggered dbt Cloud job run ended in an unexpected state.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The run data returned by the dbt Cloud administrative API.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Trigger a dbt Cloud job and wait for completion as a stand alone flow:</span>
<span class="sd">        ```python</span>
<span class="sd">        import asyncio</span>
<span class="sd">        from prefect_dbt.cloud import DbtCloudCredentials</span>
<span class="sd">        from prefect_dbt.cloud.jobs import trigger_dbt_cloud_job_run_and_wait_for_completion</span>

<span class="sd">        asyncio.run(</span>
<span class="sd">            trigger_dbt_cloud_job_run_and_wait_for_completion(</span>
<span class="sd">                dbt_cloud_credentials=DbtCloudCredentials(</span>
<span class="sd">                    api_key=&quot;my_api_key&quot;,</span>
<span class="sd">                    account_id=123456789</span>
<span class="sd">                ),</span>
<span class="sd">                job_id=1</span>
<span class="sd">            )</span>
<span class="sd">        )</span>
<span class="sd">        ```</span>

<span class="sd">        Trigger a dbt Cloud job and wait for completion as a sub-flow:</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import flow</span>
<span class="sd">        from prefect_dbt.cloud import DbtCloudCredentials</span>
<span class="sd">        from prefect_dbt.cloud.jobs import trigger_dbt_cloud_job_run_and_wait_for_completion</span>

<span class="sd">        @flow</span>
<span class="sd">        def my_flow():</span>
<span class="sd">            ...</span>
<span class="sd">            run_result = trigger_dbt_cloud_job_run_and_wait_for_completion(</span>
<span class="sd">                dbt_cloud_credentials=DbtCloudCredentials(</span>
<span class="sd">                    api_key=&quot;my_api_key&quot;,</span>
<span class="sd">                    account_id=123456789</span>
<span class="sd">                ),</span>
<span class="sd">                job_id=1</span>
<span class="sd">            )</span>
<span class="sd">            ...</span>

<span class="sd">        my_flow()</span>
<span class="sd">        ```</span>

<span class="sd">        Trigger a dbt Cloud job with overrides:</span>
<span class="sd">        ```python</span>
<span class="sd">        import asyncio</span>
<span class="sd">        from prefect_dbt.cloud import DbtCloudCredentials</span>
<span class="sd">        from prefect_dbt.cloud.jobs import trigger_dbt_cloud_job_run_and_wait_for_completion</span>
<span class="sd">        from prefect_dbt.cloud.models import TriggerJobRunOptions</span>

<span class="sd">        asyncio.run(</span>
<span class="sd">            trigger_dbt_cloud_job_run_and_wait_for_completion(</span>
<span class="sd">                dbt_cloud_credentials=DbtCloudCredentials(</span>
<span class="sd">                    api_key=&quot;my_api_key&quot;,</span>
<span class="sd">                    account_id=123456789</span>
<span class="sd">                ),</span>
<span class="sd">                job_id=1,</span>
<span class="sd">                trigger_job_run_options=TriggerJobRunOptions(</span>
<span class="sd">                    git_branch=&quot;staging&quot;,</span>
<span class="sd">                    schema_override=&quot;dbt_cloud_pr_123&quot;,</span>
<span class="sd">                    dbt_version_override=&quot;0.18.0&quot;,</span>
<span class="sd">                    target_name_override=&quot;staging&quot;,</span>
<span class="sd">                    timeout_seconds_override=3000,</span>
<span class="sd">                    generate_docs_override=True,</span>
<span class="sd">                    threads_override=8,</span>
<span class="sd">                    steps_override=[</span>
<span class="sd">                        &quot;dbt seed&quot;,</span>
<span class="sd">                        &quot;dbt run --fail-fast&quot;,</span>
<span class="sd">                        &quot;dbt test --fail fast&quot;,</span>
<span class="sd">                    ],</span>
<span class="sd">                ),</span>
<span class="sd">            )</span>
<span class="sd">        )</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">get_run_logger</span><span class="p">()</span>

    <span class="n">triggered_run_data_future</span> <span class="o">=</span> <span class="k">await</span> <span class="n">trigger_dbt_cloud_job_run</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">dbt_cloud_credentials</span><span class="p">,</span>
        <span class="n">job_id</span><span class="o">=</span><span class="n">job_id</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="n">trigger_job_run_options</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">run_id</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="n">triggered_run_data_future</span><span class="o">.</span><span class="n">result</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">run_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unable to determine run ID for triggered job.&quot;</span><span class="p">)</span>

    <span class="n">final_run_status</span><span class="p">,</span> <span class="n">run_data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">wait_for_dbt_cloud_job_run</span><span class="p">(</span>
        <span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">dbt_cloud_credentials</span><span class="p">,</span>
        <span class="n">max_wait_seconds</span><span class="o">=</span><span class="n">max_wait_seconds</span><span class="p">,</span>
        <span class="n">poll_frequency_seconds</span><span class="o">=</span><span class="n">poll_frequency_seconds</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">final_run_status</span> <span class="o">==</span> <span class="n">DbtCloudJobRunStatus</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">list_run_artifacts_future</span> <span class="o">=</span> <span class="k">await</span> <span class="n">list_dbt_cloud_run_artifacts</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span>
                <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">dbt_cloud_credentials</span><span class="p">,</span>
                <span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">run_data</span><span class="p">[</span><span class="s2">&quot;artifact_paths&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="n">list_run_artifacts_future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">DbtCloudListRunArtifactsFailed</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Unable to retrieve artifacts for job run with ID </span><span class="si">%s</span><span class="s2">. Reason: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">run_id</span><span class="p">,</span>
                <span class="n">ex</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;dbt Cloud job run with ID </span><span class="si">%s</span><span class="s2"> completed successfully!&quot;</span><span class="p">,</span>
            <span class="n">run_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">run_data</span>
    <span class="k">elif</span> <span class="n">final_run_status</span> <span class="o">==</span> <span class="n">DbtCloudJobRunStatus</span><span class="o">.</span><span class="n">CANCELLED</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DbtCloudJobRunCancelled</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Triggered job run with ID </span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2"> was cancelled.&quot;</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">final_run_status</span> <span class="o">==</span> <span class="n">DbtCloudJobRunStatus</span><span class="o">.</span><span class="n">FAILED</span><span class="p">:</span>
        <span class="k">while</span> <span class="n">retry_filtered_models_attempts</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Retrying job run with ID: </span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">retry_filtered_models_attempts</span><span class="si">}</span><span class="s2"> more times&quot;</span>
            <span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">retry_filtered_models_attempts</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="n">run_data</span> <span class="o">=</span> <span class="k">await</span> <span class="p">(</span>
                    <span class="n">retry_dbt_cloud_job_run_subset_and_wait_for_completion</span><span class="p">(</span>
                        <span class="n">dbt_cloud_credentials</span><span class="o">=</span><span class="n">dbt_cloud_credentials</span><span class="p">,</span>
                        <span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
                        <span class="n">trigger_job_run_options</span><span class="o">=</span><span class="n">trigger_job_run_options</span><span class="p">,</span>
                        <span class="n">max_wait_seconds</span><span class="o">=</span><span class="n">max_wait_seconds</span><span class="p">,</span>
                        <span class="n">poll_frequency_seconds</span><span class="o">=</span><span class="n">poll_frequency_seconds</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">run_data</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DbtCloudJobRunFailed</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Triggered job run with ID: </span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2"> failed.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Triggered job run with ID: </span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2"> ended with unexpected&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;status </span><span class="si">{</span><span class="n">final_run_status</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.prefect.io/slack/" target="_blank" rel="noopener" title="www.prefect.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://discourse.prefect.io/" target="_blank" rel="noopener" title="discourse.prefect.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9C448 134.3 348.6 32 225.9 32zM224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/c/PrefectIO/videos" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://prefect.io/guide/" target="_blank" rel="noopener" title="prefect.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M168 80c-13.3 0-24 10.7-24 24v304c0 8.4-1.4 16.5-4.1 24H440c13.3 0 24-10.7 24-24V104c0-13.3-10.7-24-24-24H168zM72 480c-39.8 0-72-32.2-72-72V112c0-13.3 10.7-24 24-24s24 10.7 24 24v296c0 13.3 10.7 24 24 24s24-10.7 24-24V104c0-39.8 32.2-72 72-72h272c39.8 0 72 32.2 72 72v304c0 39.8-32.2 72-72 72H72zm104-344c0-13.3 10.7-24 24-24h96c13.3 0 24 10.7 24 24v80c0 13.3-10.7 24-24 24h-96c-13.3 0-24-10.7-24-24v-80zm200-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80h32c13.3 0 24 10.7 24 24s-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24s10.7-24 24-24zm-176 80h208c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80h208c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/PrefectIO" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/prefect/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/PrefectHQ/prefect" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/r/prefecthq/prefect/" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/prefect/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.81fa17fe.min.js"></script>
      
    
  </body>
</html>